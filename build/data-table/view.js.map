{"version":3,"file":"data-table/view.js","mappings":"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","sources":["webpack://data-tables/external module \"@wordpress/interactivity\"","webpack://data-tables/webpack/bootstrap","webpack://data-tables/webpack/runtime/make namespace object","webpack://data-tables/./src/data-table/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport {\n\tstore,\n\tgetContext,\n\tgetElement,\n\tuseState,\n\tuseEffect,\n} from '@wordpress/interactivity';\n\nconst initTable = ( tableId ) => {\n\tconst title = document.querySelector( '.site-main h1' )?.innerText || document.title;\n\tlet USDollar = new Intl.NumberFormat( 'en-US', {\n\t\tstyle: 'currency',\n\t\tcurrency: 'USD',\n\t} );\n\n\tconst {\n\t\ttableType,\n\t\tthinkTank,\n\t\tdonor,\n\t\tdonationYear,\n\t\tdonorType,\n\t\tsearch,\n\t\tsearchLabel,\n\t\tajaxUrl,\n\t\taction,\n\t\tnonce,\n\t\tpageLength\n\t} = state;\n\n\tconst table = new DataTable( tableId, {\n\t\t// pageLength: pageLength || 50,\n\t\tretrieve: true,\n\t\tapi: true,\n\t\tautoWidth: false,\n\t\tprocessing: true,\n\t\tlayout: {\n\t\t\ttopEnd: {\n\t\t\t\tsearch: {\n\t\t\t\t\tplaceholder: 'Enter keyword...',\n\t\t\t\t\ttext: state.searchLabel || 'Search',\n\t\t\t\t\tprocessing: true,\n\t\t\t\t\tmenu: [25, 50, 75, 100]\n\t\t\t\t},\n\t\t\t},\n\t\t\ttopStart: {\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\textend: 'csvHtml5',\n\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\ttext: 'Download Data',\n\t\t\t\t\t\texportOptions: {\n\t\t\t\t\t\t\tcolumns:':visible:not(.noExport)'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tinfo: {\n\t\t\t\t\tcallback: function ( s, start, end, max, total, result ) {\n\t\t\t\t\t\treturn `${ max } Records Found`;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tbottomStart: false,\n\t\t\tbottomEnd: {\n\t\t\t\tpaging: {\n\t\t\t\t\ttype: 'simple_numbers',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\trender: {\n\t\t\tcurrency: function ( data, type, row ) {\n\t\t\t\treturn USDollar.format( data );\n\t\t\t},\n\t\t\tnumber: function ( data, type, row ) {\n\t\t\t\treturn data.toString().replace( /\\B(?=(\\d{3})+(?!\\d))/g, \"'\" );\n\t\t\t},\n\t\t\t// date: function ( data, type, row ) {\n\t\t\t// \treturn new Date( data ).toLocaleDateString();\n\t\t\t// },\n\t\t\t// dateRange: function ( data, type, row ) {\n\t\t\t// \treturn `${ new Date( data.start ).toLocaleDateString() } - ${ new Date( data.end ).toLocaleDateString() }`;\n\t\t\t// },\n\t\t\t// link: function ( data, type, row ) {\n\t\t\t// \treturn `<a href=\"${ data }\" target=\"_blank\">${ data }</a>`;\n\t\t\t// },\n\t\t\t// image: function ( data, type, row ) {\n\t\t\t// \treturn `<img src=\"${ data }\" alt=\"${ row.name }\" />`;\n\t\t\t// },\n\t\t},\n\t\tdrawCallback: function ( settings ) {\n\t\t\t// console.log( `drawCallback: `, settings );\n\t\t},\n\t\tinitComplete: function ( settings, json ) {\n\t\t\t// console.log( `initComplete: `, settings );\n\t\t}, \n\t\t// formatNumber: function ( toFormat ) {\n\t\t// \tconsole.log( `toFormat: `, toFormat );\n\t\t// \treturn toFormat.toString().replace( /\\B(?=(\\d{3})+(?!\\d))/g, \"'\" );\n\t\t// },\n\t\theaderCallback: function ( thead, data, start, end, display ) {},\n\t\tfooterCallback: function ( row, data, start, end, display ) {},\n\t} );\n\n\treturn table;\n};\n\nconst hasStateChanged = () => {\n    const [ type, setType ] = useState( state.donorType );\n    const [ year, setYear ] = useState( state.donationYear );\n\n    const checkStateChanged = () => {\n        return type !== state.donorType || year !== state.donationYear;\n    };\n\n    useEffect(() => {\n        if ( checkStateChanged() ) {\n            setType( state.donorType );\n            setYear( state.donationYear );\n        }\n    }, [ state.donorType, state.donationYear ] );\n\n    return checkStateChanged();\n};\n\nconst { state, actions, callbacks } = store( 'ttft/data-tables', {\n\tstate: {\n\t\tisLoading: false,\n\t\tdonationYear: 'all',\n\t\tdonorType: 'all',\n\t\tentityType: 'think_tank',\n\t},\n\tactions: {\n\t\tasync renderTable() {\n\t\t\tconst context = getContext();\n\n\t\t\ttry {\n\t\t\t\tconst {\n\t\t\t\t\ttableType,\n\t\t\t\t\tthinkTank,\n\t\t\t\t\tdonor,\n\t\t\t\t\tdonationYear,\n\t\t\t\t\tdonorType,\n\t\t\t\t\tsearch,\n\t\t\t\t\tsearchLabel,\n\t\t\t\t\tajaxUrl,\n\t\t\t\t\taction,\n\t\t\t\t\tnonce,\n\t\t\t\t} = state;\n\n\t\t\t\tconst formData = new FormData();\n\t\t\t\tformData.append( 'action', action );\n\t\t\t\tformData.append( 'nonce', nonce );\n\t\t\t\tformData.append( 'table_type', tableType );\n\t\t\t\tformData.append( 'search_label', searchLabel || 'Search' );\n\t\t\t\tformData.append( 'donation_year', donationYear || 'all' );\n\t\t\t\tformData.append( 'donor_type', donorType || 'all' );\n\t\t\t\tformData.append( 'think_tank', thinkTank );\n\t\t\t\tformData.append( 'donor', donor );\n\t\t\t\tformData.append( 'search', search || '' );\n\n\t\t\t\tconsole.log( `formData: `, formData );\n\n\t\t\t\tstate.isLoading = true;\n\t\t\t\tcontext.isLoaded = false;\n\n\t\t\t\tconst response = await fetch( ajaxUrl, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: formData,\n\t\t\t\t} );\n\n\t\t\t\tconst responseText = await response.text();\n\n\t\t\t\tconsole.log( `responseText: `, responseText );\n\n\t\t\t\tif ( ! response.ok ) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`HTTP error! status: ${ response.status }`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst jsonResponse = JSON.parse( responseText );\n\n\t\t\t\tif ( jsonResponse.success ) {\n\t\t\t\t\tstate.tableData = jsonResponse.data;\n\n\t\t\t\t\t// debugger;\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Maybe not necessary to destroy the table\n\t\t\t\t\t */\n\t\t\t\t\t// await actions.destroyTableAsync();\n\n\t\t\t\t\tconst container = document.getElementById(\n\t\t\t\t\t\tstate.elementId\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( container ) {\n\t\t\t\t\t\tcontainer.innerHTML = jsonResponse.data;\n\n\t\t\t\t\t\tif ( state.table ) {\n\t\t\t\t\t\t\tstate.table.clear();\n\t\t\t\t\t\t\tstate.table = initTable( `#${ state.tableId }` );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error( `Error fetching table data:`, jsonResponse.data );\n\t\t\t\t}\n\t\t\t} catch ( event ) {\n\t\t\t\tconsole.error( `catch( event ) renderTable:`, event );\n\t\t\t} finally {\n\t\t\t\tstate.isLoading = false;\n\t\t\t\tcontext.isLoaded = true;\n\t\t\t}\n\t\t},\n\t\tinitTable: () => {\n\t\t\tstate.table = initTable( `#${state.tableId}` );\n\t\t},\n\t\tdestroyTable: () => {\n\t\t\tstate.table.clear().draw();\n\t\t\tstate.table.destroy();\n\t\t},\n\t\tdestroyTableAsync: () => {\n\t\t\treturn new Promise( ( resolve ) => {\n\t\t\t\tactions.destroyTable();\n\t\t\t\tresolve();\n\t\t\t} );\n\t\t},\n\t\tsetContext: () => {\n\t\t\tconst context = getContext();\n\t\t\t// context.tableType && ( context.tableType = state.tableType );\n\t\t\t// context.donationYear && ( context.donationYear = state.donationYear );\n\t\t\t// context.donorType && ( context.donorType = state.donorType );\n\t\t\tcontext.searchLabel && ( context.searchLabel = state.searchLabel );\n\t\t},\n\t\tgenerateSkeletonTable: ( columns ) => {\n\t\t\tlet rows = '';\n\t\t\tconst max = 10;\n\t\t\tfor ( let rowIndex = 0; rowIndex < max; rowIndex++ ) {\n\t\t\t\trows += '<tr class=\"row skeleton-row\" width=\"100%\">';\n\t\t\t\tfor ( let colIndex = 0; colIndex < columns; colIndex++ ) {\n\t\t\t\t\trows +=\n\t\t\t\t\t\t'<td class=\"cell skeleton-cell\"><div class=\"loader\"></div></td>';\n\t\t\t\t}\n\t\t\t\trows += '</tr>';\n\t\t\t}\n\t\t\treturn rows;\n\t\t},\n\t},\n\tcallbacks: {\n\t\trenderTable: () => {\n\t\t\tconst hasChanged = hasStateChanged();\n\t\t\tuseEffect( () => {\n\t\t\t\tif ( hasChanged ) {\n\t\t\t\t\tactions.renderTable();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t\tloadAnimation: () => {\n\t\t\tuseEffect( () => {\n\t\t\t\tconst container = document.getElementById( state.elementId );\n\t\t\t\tif ( state.isLoading && container ) {\n\t\t\t\t\tconst columns = container.querySelectorAll( 'thead th' ).length;\n\t\t\t\t\tconst skeletonTable = actions.generateSkeletonTable( columns );\n\t\t\t\t\tconst body = container.querySelector( 'tbody' );\n\t\t\t\t\tif ( body ) {\n\t\t\t\t\t\tbody.innerHTML = skeletonTable;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, [ state.isLoading ] );\n\t\t},\n\t\tinitLog: () => {\n\t\t\t// console.log( `Initial State: `, JSON.stringify( state, undefined, 2 )  );\n\t\t\t// const { tableType, donationYear, donorType, isLoaded } = getContext();\n\t\t\t// console.log( `Initial Context: ${tableType}, isLoaded: ${isLoaded}, ${donationYear}, ${donorType}` );\n\t\t},\n\t\tlogTable: () => {\n\t\t\tconst { tableType, thinkTank, donor, donationYear, donorType, search, isLoading } = state;\n\t\t\tconsole.log( `State: `, tableType, thinkTank, donor, donationYear, donorType, isLoading );\n\t\t},\n\t\tlogState: ( key ) => {\n\t\t\tconsole.log( `key: `, state.key );\n\t\t},\n\t\tlogLoading: () => {\n\t\t\tconst context = getContext();\n\t\t\tconsole.log( `IS LOADING: `, state.isLoading, context.isLoaded );\n\t\t},\n\t},\n} );\n"],"names":["store","getContext","getElement","useState","useEffect","initTable","tableId","title","document","querySelector","innerText","USDollar","Intl","NumberFormat","style","currency","tableType","thinkTank","donor","donationYear","donorType","search","searchLabel","ajaxUrl","action","nonce","pageLength","state","table","DataTable","retrieve","api","autoWidth","processing","layout","topEnd","placeholder","text","menu","topStart","buttons","extend","exportOptions","columns","info","callback","s","start","end","max","total","result","bottomStart","bottomEnd","paging","type","render","data","row","format","number","toString","replace","drawCallback","settings","initComplete","json","headerCallback","thead","display","footerCallback","hasStateChanged","setType","year","setYear","checkStateChanged","actions","callbacks","isLoading","entityType","renderTable","context","formData","FormData","append","console","log","isLoaded","response","fetch","method","body","responseText","ok","Error","status","jsonResponse","JSON","parse","success","tableData","container","getElementById","elementId","innerHTML","clear","error","event","destroyTable","draw","destroy","destroyTableAsync","Promise","resolve","setContext","generateSkeletonTable","rows","rowIndex","colIndex","hasChanged","loadAnimation","querySelectorAll","length","skeletonTable","initLog","logTable","logState","key","logLoading"],"sourceRoot":""}