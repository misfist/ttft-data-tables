{"version":3,"file":"data-table/view.js","mappings":"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","sources":["webpack://data-tables/external module \"@wordpress/interactivity\"","webpack://data-tables/webpack/bootstrap","webpack://data-tables/webpack/runtime/make namespace object","webpack://data-tables/./src/data-table/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { store, getContext, getElement } from '@wordpress/interactivity';\n\nlet initTable = ( el ) => {\n\tconst title = document.querySelector( '.site-main h1' )?.innerText || document.title;\n\treturn new DataTable( el, {\n\t\tinfo: false,\n\t\tpageLength: 50,\n\t\tlayout: {\n\t\t\tbottomEnd: {\n\t\t\t\tpaging: {\n\t\t\t\t\ttype: 'simple_numbers',\n\t\t\t\t},\n\t\t\t},\n\t\t\ttopEnd: {\n\t\t\t\tsearch: {\n\t\t\t\t\tplaceholder: 'Enter keyword...',\n\t\t\t\t\ttext: state.searchLabel,\n\t\t\t\t},\n\t\t\t},\n\t\t\ttopStart: {\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\textend: 'csvHtml5',\n\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\ttext: 'Download Data',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t}\n\t} );\n}\n\nconst { state, actions, callbacks } = store( 'ttft/data-tables', {\n\tstate: {\n\t\tisLoading: false\n\t},\n    actions: {\n        async renderTable() {\n            try {\n                const { tableType, thinkTank, donor, donationYear, donorType, ajaxUrl, action, nonce } = state;\n\n                const formData = new FormData();\n                formData.append( 'action', action );\n                formData.append( 'nonce', nonce );\n                formData.append( 'table_type', tableType );\n                formData.append( 'donation_year', donationYear );\n                formData.append( 'donor_type', donorType );\n\t\t\t\tformData.append( 'think_tank', thinkTank );\n                formData.append( 'donor', donor );\n\n                callbacks.logFormData( formData );\n\n\t\t\t\tstate.isLoading = true;\n\n                const response = await fetch( ajaxUrl, {\n                    method: 'POST',\n                    body: formData,\n                });\n\n                const responseText = await response.text();\n\n                callbacks.logResponseData( responseText );\n\n\t\t\t\tif ( ! response.ok ) {\n                    throw new Error( `HTTP error! status: ${response.status}` );\n                }\n\n                const jsonResponse = JSON.parse( responseText );\n\n                if ( jsonResponse.success ) {\n                    state.tableData = jsonResponse.data;\n                    // console.log( 'renderTable', JSON.stringify( state.tableData, undefined, 2 ) );\n\n\t\t\t\t\tactions.destroyTable();\n\n\t\t\t\t\tconst container = document.getElementById( state.elementId );\n                    container.innerHTML = ''; \n\n                    container.innerHTML = jsonResponse.data;\n\t\t\t\t\tstate.table = initTable( `#${state.tableId}` );\n\n                } else {\n                    console.error( 'Error fetching table data:', jsonResponse.data );\n                }\n            } catch ( event ) {\n                console.error( 'Something went wrong!', event );\n            } finally {\n                state.isLoading = false;\n            }\n        },\n\t\tinitTable: () => {\n\t\t\tstate.table = initTable( `#${state.tableId}` );\n\t\t},\n\t\tdestroyTable: () => {\n\t\t\tstate.table.clear().draw();\n\t\t\tstate.table.destroy();\n\t\t},\n        updateContext: () => {\n            const context = getContext();\n            context.tableType = state.tableType;\n            context.donationYear = state.donationYear;\n            context.donorType = state.donorType;\n        }\n    },\n    callbacks: {\n        initLog: () => {\n            console.log( `Initial State: `, JSON.stringify( state, undefined, 2 )  );\n            // const context = getContext();\n            const { tableType, donationYear, donorType } = getContext();\n            console.log( `Initial Context: ${tableType}, ${donationYear}, ${donorType}` );\n        },\n        logTable: () => {\n            console.log( `State: `, JSON.stringify( state, undefined, 2 )  );\n            // const context = getContext();\n            const { tableType, donationYear, donorType } = getContext();\n            console.log( `Context: ${tableType}, ${donationYear}, ${donorType}` );\n        },\n        logFormData: ( data ) => {\n            for ( const [ key, value ] of data.entries() ) {\n                console.log( `${ key }: ${ value }` );\n            }\n        },\n        logResponseData: ( data ) => {\n            // console.log( 'Raw response:', data );\n        },\n\t\tlogLoading: () => {\n\t\t\tconsole.log( `IS LOADING ${state.isLoading}` );\n\t\t}\n    },\n});\n"],"names":["store","getContext","getElement","initTable","el","title","document","querySelector","innerText","DataTable","info","pageLength","layout","bottomEnd","paging","type","topEnd","search","placeholder","text","state","searchLabel","topStart","buttons","extend","actions","callbacks","isLoading","renderTable","tableType","thinkTank","donor","donationYear","donorType","ajaxUrl","action","nonce","formData","FormData","append","logFormData","response","fetch","method","body","responseText","logResponseData","ok","Error","status","jsonResponse","JSON","parse","success","tableData","data","destroyTable","container","getElementById","elementId","innerHTML","table","tableId","console","error","event","clear","draw","destroy","updateContext","context","initLog","log","stringify","undefined","logTable","key","value","entries","logLoading"],"sourceRoot":""}