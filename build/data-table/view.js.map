{"version":3,"file":"data-table/view.js","mappings":"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","sources":["webpack://data-tables/external module \"@wordpress/interactivity\"","webpack://data-tables/webpack/bootstrap","webpack://data-tables/webpack/runtime/make namespace object","webpack://data-tables/./src/data-table/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport {\n\tstore,\n\tgetContext,\n\tgetElement,\n\tuseState,\n\tuseEffect,\n} from '@wordpress/interactivity';\n\nconst initTable = ( table ) => {\n\tconst title = document.querySelector( '.site-main h1' )?.innerText || document.title;\n\tconst pageLength = state.pageLength;\n\treturn new DataTable( table, {\n\t\tpageLength: 25,\n\t\tretrieve: true,\n\t\tapi: true,\n\t\tautoWidth: false,\n\t\tlayout: {\n\t\t\tbottomStart: {\n\t\t\t\tinfo: {\n\t\t\t\t\tcallback: function ( s, start, end, max, total, result ) {\n\t\t\t\t\t\treturn ``;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tbottomEnd: {\n\t\t\t\tpaging: {\n\t\t\t\t\ttype: 'simple_numbers',\n\t\t\t\t},\n\t\t\t\tinfo: {\n\t\t\t\t\tcallback: function ( s, start, end, max, total, result ) {\n\t\t\t\t\t\treturn `${ max } Records Found.`;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\ttopEnd: {\n\t\t\t\tsearch: {\n\t\t\t\t\tplaceholder: 'Enter keyword...',\n\t\t\t\t\ttext: state.searchLabel || 'Search',\n\t\t\t\t},\n\t\t\t},\n\t\t\ttopStart: {\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\textend: 'csvHtml5',\n\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\ttext: 'Download Data',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t},\n\t\tcolumnDefs: [],\n\t\tstateSave: true,\n\t\t// stateLoadCallback: function ( settings, callback ) {\n\t\t// \tjQuery.ajax( {\n\t\t// \t\turl: '/state_load',\n\t\t// \t\tdataType: 'json',\n\t\t// \t\tsuccess: function ( json ) {\n\t\t// \t\t\tcallback( json );\n\t\t// \t\t}\n\t\t// \t} );\n\t\t// \tconsole.log( `stateLoadCallback: `, settings );\n\t\t// },\n\t\tpreDrawCallback: function ( settings ) {\n\t\t\tconsole.log( `preDrawCallback: `, settings );\n\t\t},\n\t\tdrawCallback: function ( settings ) {\n\t\t\tconsole.log( `drawCallback: `, settings );\n\t\t\tconst api = this.api();\n \n\t\t\tconsole.log( api.rows( { page: 'current' } ).data() );\n\t\t},\n\t\theaderCallback: function ( thead, data, start, end, display ) {\n\t\t\t// jQuery( thead )\n\t\t\t// \t.find( 'th' )\n\t\t\t// \t.eq( 0 )\n\t\t\t// \t.html( `Displaying ${ end - start} records.` );\n\t\t\tconsole.log( `headerCallback: `, thead, data, start, end, display );\n\t\t},\n\t\tfooterCallback: function ( row, data, start, end, display ) {\n\t\t\tconsole.log( `footerCallback: `, row, data, start, end, display );\n\t\t},\n\t} );\n};\n\nconst hasStateChanged = () => {\n    const [ type, setType ] = useState( state.donorType );\n    const [ year, setYear ] = useState( state.donationYear );\n\n    const checkStateChanged = () => {\n        return type !== state.donorType || year !== state.donationYear;\n    };\n\n    useEffect(() => {\n        if ( checkStateChanged() ) {\n            setType( state.donorType );\n            setYear( state.donationYear );\n        }\n    }, [ state.donorType, state.donationYear ] );\n\n    return checkStateChanged();\n};\n\nconst { state, actions, callbacks } = store( 'ttft/data-tables', {\n\tstate: {\n\t\tisLoading: false,\n\t\tpageLength: 50,\n\t\tdonationYear: 'all',\n\t\tdonorType: 'all',\n\t\tentityType: 'think_tank',\n\t},\n\tactions: {\n\t\tasync renderTable() {\n\t\t\tconst context = getContext();\n\n\t\t\ttry {\n\t\t\t\tconst {\n\t\t\t\t\ttableType,\n\t\t\t\t\tthinkTank,\n\t\t\t\t\tdonor,\n\t\t\t\t\tdonationYear,\n\t\t\t\t\tdonorType,\n\t\t\t\t\tsearch,\n\t\t\t\t\tsearchLabel,\n\t\t\t\t\tajaxUrl,\n\t\t\t\t\taction,\n\t\t\t\t\tnonce,\n\t\t\t\t} = state;\n\n\t\t\t\tconst formData = new FormData();\n\t\t\t\tformData.append( 'action', action );\n\t\t\t\tformData.append( 'nonce', nonce );\n\t\t\t\tformData.append( 'table_type', tableType );\n\t\t\t\tformData.append( 'search_label', searchLabel || 'Search' );\n\t\t\t\tformData.append( 'donation_year', donationYear || 'all' );\n\t\t\t\tformData.append( 'donor_type', donorType || 'all' );\n\t\t\t\tformData.append( 'think_tank', thinkTank );\n\t\t\t\tformData.append( 'donor', donor );\n\t\t\t\tformData.append( 'search', search || '' );\n\n\t\t\t\tconsole.log( `formData: `, formData );\n\n\t\t\t\tstate.isLoading = true;\n\t\t\t\tcontext.isLoaded = false;\n\n\t\t\t\tconst response = await fetch( ajaxUrl, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: formData,\n\t\t\t\t} );\n\n\t\t\t\tconst responseText = await response.text();\n\n\t\t\t\tconsole.log( `responseText: `, responseText );\n\n\t\t\t\tif ( ! response.ok ) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`HTTP error! status: ${ response.status }`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst jsonResponse = JSON.parse( responseText );\n\n\t\t\t\tif ( jsonResponse.success ) {\n\t\t\t\t\tstate.tableData = jsonResponse.data;\n\n\t\t\t\t\t// debugger;\n\n\t\t\t\t\tawait actions.destroyTableAsync();\n\n\t\t\t\t\tconst container = document.getElementById(\n\t\t\t\t\t\tstate.elementId\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( container ) {\n\t\t\t\t\t\tcontainer.innerHTML = jsonResponse.data;\n\n\t\t\t\t\t\tif ( state.table ) {\n\t\t\t\t\t\t\tstate.table = initTable( `#${ state.tableId }` );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error( `Error fetching table data:`, jsonResponse.data );\n\t\t\t\t}\n\t\t\t} catch ( event ) {\n\t\t\t\tconsole.error( `catch( event ) renderTable:`, event );\n\t\t\t} finally {\n\t\t\t\tstate.isLoading = false;\n\t\t\t\tcontext.isLoaded = true;\n\t\t\t}\n\t\t},\n\t\tinitTable: () => {\n\t\t\tstate.table = initTable( `#${state.tableId}` );\n\t\t},\n\t\tdestroyTable: () => {\n\t\t\tstate.table.clear().draw();\n\t\t\tstate.table.destroy();\n\t\t},\n\t\tdestroyTableAsync: () => {\n\t\t\treturn new Promise( ( resolve ) => {\n\t\t\t\tactions.destroyTable();\n\t\t\t\tresolve();\n\t\t\t} );\n\t\t},\n\t\tsetContext: () => {\n\t\t\tconst context = getContext();\n\t\t\t// context.tableType && ( context.tableType = state.tableType );\n\t\t\t// context.donationYear && ( context.donationYear = state.donationYear );\n\t\t\t// context.donorType && ( context.donorType = state.donorType );\n\t\t\tcontext.searchLabel && ( context.searchLabel = state.searchLabel );\n\t\t},\n\t\tgenerateSkeletonTable: ( columns ) => {\n\t\t\tlet rows = '';\n\t\t\tconst max = 10;\n\t\t\tfor ( let rowIndex = 0; rowIndex < max; rowIndex++ ) {\n\t\t\t\trows += '<tr class=\"row skeleton-row\" width=\"100%\">';\n\t\t\t\tfor ( let colIndex = 0; colIndex < columns; colIndex++ ) {\n\t\t\t\t\trows +=\n\t\t\t\t\t\t'<td class=\"cell skeleton-cell\"><div class=\"loader\"></div></td>';\n\t\t\t\t}\n\t\t\t\trows += '</tr>';\n\t\t\t}\n\t\t\treturn rows;\n\t\t},\n\t},\n\tcallbacks: {\n\t\trenderTable: () => {\n\t\t\tconst hasChanged = hasStateChanged();\n\t\t\tuseEffect( () => {\n\t\t\t\tif ( hasChanged ) {\n\t\t\t\t\tactions.renderTable();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t\tloadAnimation: () => {\n\t\t\tuseEffect( () => {\n\t\t\t\tconst container = document.getElementById( state.elementId );\n\t\t\t\tif ( state.isLoading && container ) {\n\t\t\t\t\tconst columns = container.querySelectorAll( 'thead th' ).length;\n\t\t\t\t\tconst skeletonTable = actions.generateSkeletonTable( columns );\n\t\t\t\t\tconst body = container.querySelector( 'tbody' );\n\t\t\t\t\tif ( body ) {\n\t\t\t\t\t\tbody.innerHTML = skeletonTable;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, [ state.isLoading ] );\n\t\t},\n\t\tinitLog: () => {\n\t\t\t// console.log( `Initial State: `, JSON.stringify( state, undefined, 2 )  );\n\t\t\t// const { tableType, donationYear, donorType, isLoaded } = getContext();\n\t\t\t// console.log( `Initial Context: ${tableType}, isLoaded: ${isLoaded}, ${donationYear}, ${donorType}` );\n\t\t},\n\t\tlogTable: () => {\n\t\t\tconst { tableType, thinkTank, donor, donationYear, donorType, search, isLoading } = state;\n\t\t\tconsole.log( `State: `, tableType, thinkTank, donor, donationYear, donorType, isLoading );\n\t\t},\n\t\tlogState: ( key ) => {\n\t\t\tconsole.log( `key: `, state.key );\n\t\t},\n\t\tlogLoading: () => {\n\t\t\tconst context = getContext();\n\t\t\tconsole.log( `IS LOADING: `, state.isLoading, context.isLoaded );\n\t\t},\n\t},\n} );\n"],"names":["store","getContext","getElement","useState","useEffect","initTable","table","title","document","querySelector","innerText","pageLength","state","DataTable","retrieve","api","autoWidth","layout","bottomStart","info","callback","s","start","end","max","total","result","bottomEnd","paging","type","topEnd","search","placeholder","text","searchLabel","topStart","buttons","extend","columnDefs","stateSave","preDrawCallback","settings","console","log","drawCallback","rows","page","data","headerCallback","thead","display","footerCallback","row","hasStateChanged","setType","donorType","year","setYear","donationYear","checkStateChanged","actions","callbacks","isLoading","entityType","renderTable","context","tableType","thinkTank","donor","ajaxUrl","action","nonce","formData","FormData","append","isLoaded","response","fetch","method","body","responseText","ok","Error","status","jsonResponse","JSON","parse","success","tableData","destroyTableAsync","container","getElementById","elementId","innerHTML","tableId","error","event","destroyTable","clear","draw","destroy","Promise","resolve","setContext","generateSkeletonTable","columns","rowIndex","colIndex","hasChanged","loadAnimation","querySelectorAll","length","skeletonTable","initLog","logTable","logState","key","logLoading"],"sourceRoot":""}