{"version":3,"file":"data-table/view.js","mappings":"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","sources":["webpack://data-tables/external module \"@wordpress/interactivity\"","webpack://data-tables/webpack/bootstrap","webpack://data-tables/webpack/runtime/make namespace object","webpack://data-tables/./src/data-table/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport {\n\tstore,\n\tgetContext,\n\tgetElement,\n\tuseState,\n\tuseEffect,\n} from '@wordpress/interactivity';\n\nlet initTable = ( table ) => {\n\tconst title =\n\t\tdocument.querySelector( '.site-main h1' )?.innerText || document.title;\n\tconst pageLength = state.pageLength;\n\treturn new DataTable( table, {\n\t\tpageLength: 50,\n\t\tlayout: {\n\t\t\tbottomStart: {\n\t\t\t\tinfo: {\n\t\t\t\t\tcallback: function ( s, start, end, max, total, result ) {\n\t\t\t\t\t\treturn ``;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tbottomEnd: {\n\t\t\t\tpaging: {\n\t\t\t\t\ttype: 'simple_numbers',\n\t\t\t\t},\n\t\t\t\tinfo: {\n\t\t\t\t\tcallback: function ( s, start, end, max, total, result ) {\n\t\t\t\t\t\treturn `${ max } Records Found.`;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\ttopEnd: {\n\t\t\t\tsearch: {\n\t\t\t\t\tplaceholder: 'Enter keyword...',\n\t\t\t\t\ttext: state.searchLabel || 'Search',\n\t\t\t\t},\n\t\t\t},\n\t\t\ttopStart: {\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\textend: 'csvHtml5',\n\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\ttext: 'Download Data',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t},\n\n\t\tfooterCallback: function ( row, data, start, end, display ) {\n\t\t\tconst api = this.api();\n\n\t\t\tif ( 'undefined' == typeof window.jQuery ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tArray.from( api.columns().header() ).forEach( ( header, index ) => {\n\t\t\t\tif ( header.getAttribute( 'data-summed' ) ) {\n\t\t\t\t\tconst total = api\n\t\t\t\t\t\t.column( index )\n\t\t\t\t\t\t.data()\n\t\t\t\t\t\t.reduce( function ( a, b ) {\n\t\t\t\t\t\t\treturn Number( a ) + Number( b );\n\t\t\t\t\t\t}, 0 );\n\n\t\t\t\t\tconst $column = api.column( index );\n\t\t\t\t\tconst $footer = jQuery( $column.footer() );\n\n\t\t\t\t\tif ( $footer ) {\n\t\t\t\t\t\t$footer.html( total );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t} );\n};\n\nconst { state, actions, callbacks } = store( 'ttft/data-tables', {\n\tstate: {\n\t\tisLoading: false,\n\t\tpageLength: 50,\n\t},\n\tactions: {\n\t\tasync renderTable() {\n\t\t\tconst context = getContext();\n\n\t\t\ttry {\n\t\t\t\tconst {\n\t\t\t\t\ttableType,\n\t\t\t\t\tthinkTank,\n\t\t\t\t\tdonor,\n\t\t\t\t\tdonationYear,\n\t\t\t\t\tdonorType,\n\t\t\t\t\tsearchLabel,\n\t\t\t\t\tajaxUrl,\n\t\t\t\t\taction,\n\t\t\t\t\tnonce,\n\t\t\t\t} = state;\n\n\t\t\t\tconst formData = new FormData();\n\t\t\t\tformData.append( 'action', action );\n\t\t\t\tformData.append( 'nonce', nonce );\n\t\t\t\tformData.append( 'table_type', tableType );\n\t\t\t\tformData.append( 'search_label', searchLabel || 'Search' );\n\t\t\t\tformData.append( 'donation_year', donationYear || 'all' );\n\t\t\t\tformData.append( 'donor_type', donorType || 'all' );\n\t\t\t\tformData.append( 'think_tank', thinkTank );\n\t\t\t\tformData.append( 'donor', donor );\n\n\t\t\t\t// console.log( `formData: `, formData );\n\n\t\t\t\tstate.isLoading = true;\n\t\t\t\tcontext.isLoaded = false;\n\n\t\t\t\tconst response = await fetch( ajaxUrl, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: formData,\n\t\t\t\t} );\n\n\t\t\t\tconst responseText = await response.text();\n\n\t\t\t\t// console.log( `responseText: `, responseText );\n\n\t\t\t\tif ( ! response.ok ) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`HTTP error! status: ${ response.status }`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst jsonResponse = JSON.parse( responseText );\n\n\t\t\t\tif ( jsonResponse.success ) {\n\t\t\t\t\tstate.tableData = jsonResponse.data;\n\n\t\t\t\t\t// debugger;\n\n\t\t\t\t\tawait actions.destroyTableAsync();\n\n\t\t\t\t\tconst container = document.getElementById(\n\t\t\t\t\t\tstate.elementId\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( container ) {\n\t\t\t\t\t\tcontainer.innerHTML = jsonResponse.data;\n\n\t\t\t\t\t\tif ( state.table ) {\n\t\t\t\t\t\t\tstate.table = initTable( `#${ state.tableId }` );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// console.error( `Error fetching table data:`, jsonResponse.data );\n\t\t\t\t}\n\t\t\t} catch ( event ) {\n\t\t\t\t// console.error( `catch( event ) renderTable:`, event );\n\t\t\t} finally {\n\t\t\t\tstate.isLoading = false;\n\t\t\t\tcontext.isLoaded = true;\n\t\t\t}\n\t\t},\n\t\tinitTable: () => {\n\t\t\tstate.table = initTable( `#${ state.tableId }`, state );\n\t\t},\n\t\tdestroyTable: () => {\n\t\t\tstate.table.clear().draw();\n\t\t\tstate.table.destroy();\n\t\t},\n\t\tdestroyTableAsync: () => {\n\t\t\treturn new Promise( ( resolve ) => {\n\t\t\t\tactions.destroyTable();\n\t\t\t\tresolve();\n\t\t\t} );\n\t\t},\n\t\tupdateContext: () => {\n\t\t\tconst context = getContext();\n\t\t\tcontext.tableType = state.tableType;\n\t\t\tcontext.donationYear = state.donationYear;\n\t\t\tcontext.donorType = state.donorType;\n\t\t},\n\t\tgenerateSkeletonTable: ( columns ) => {\n\t\t\tlet rows = '';\n\t\t\tconst max = 10;\n\t\t\tfor ( let rowIndex = 0; rowIndex < max; rowIndex++ ) {\n\t\t\t\trows += '<tr class=\"row skeleton-row\" width=\"100%\">';\n\t\t\t\tfor ( let colIndex = 0; colIndex < columns; colIndex++ ) {\n\t\t\t\t\trows +=\n\t\t\t\t\t\t'<td class=\"cell skeleton-cell\"><div class=\"loader\"></div></td>';\n\t\t\t\t}\n\t\t\t\trows += '</tr>';\n\t\t\t}\n\t\t\treturn rows;\n\t\t},\n\t},\n\tcallbacks: {\n\t\tloadAnimation: () => {\n\t\t\tuseEffect( () => {\n\t\t\t\tconst container = document.getElementById( state.elementId );\n\t\t\t\tif ( state.isLoading && container ) {\n\t\t\t\t\tconst columns =\n\t\t\t\t\t\tcontainer.querySelectorAll( 'thead th' ).length;\n\t\t\t\t\tconst skeletonTable =\n\t\t\t\t\t\tactions.generateSkeletonTable( columns );\n\t\t\t\t\tconst body = container.querySelector( 'tbody' );\n\t\t\t\t\tif ( body ) {\n\t\t\t\t\t\tbody.innerHTML = skeletonTable;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, [ state.isLoading ] );\n\t\t},\n\t\tinitLog: () => {\n\t\t\t// console.log( `Initial State: `, JSON.stringify( state, undefined, 2 )  );\n\t\t\t// const { tableType, donationYear, donorType, isLoaded } = getContext();\n\t\t\t// console.log( `Initial Context: ${tableType}, isLoaded: ${isLoaded}, ${donationYear}, ${donorType}` );\n\t\t},\n\t\tlogTable: () => {\n\t\t\t// const { tableType, thinkTank, donor, donationYear, donorType, isLoading } = state;\n\t\t\t// console.log( `State: `, tableType, thinkTank, donor, donationYear, donorType, isLoading );\n\t\t},\n\t\tlogState: ( key ) => {\n\t\t\tconsole.log( `key: `, state.key );\n\t\t},\n\t\tlogLoading: () => {\n\t\t\t// console.log( `IS LOADING: `, state.isLoading );\n\t\t},\n\t},\n} );\n"],"names":["store","getContext","getElement","useState","useEffect","initTable","table","title","document","querySelector","innerText","pageLength","state","DataTable","layout","bottomStart","info","callback","s","start","end","max","total","result","bottomEnd","paging","type","topEnd","search","placeholder","text","searchLabel","topStart","buttons","extend","footerCallback","row","data","display","api","window","jQuery","Array","from","columns","header","forEach","index","getAttribute","column","reduce","a","b","Number","$column","$footer","footer","html","actions","callbacks","isLoading","renderTable","context","tableType","thinkTank","donor","donationYear","donorType","ajaxUrl","action","nonce","formData","FormData","append","isLoaded","response","fetch","method","body","responseText","ok","Error","status","jsonResponse","JSON","parse","success","tableData","destroyTableAsync","container","getElementById","elementId","innerHTML","tableId","event","destroyTable","clear","draw","destroy","Promise","resolve","updateContext","generateSkeletonTable","rows","rowIndex","colIndex","loadAnimation","querySelectorAll","length","skeletonTable","initLog","logTable","logState","key","console","log","logLoading"],"sourceRoot":""}