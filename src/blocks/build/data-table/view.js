import*as e from"@wordpress/interactivity";(()=>{o.r(n);var e=o("@wordpress/interactivity"),t={"@wordpress/interactivity":t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n);var e=o("@wordpress/interactivity"),t={"@wordpress/interactivity":t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n);var e=o("@wordpress/interactivity"),t={"@wordpress/interactivity":t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n);var e=o("@wordpress/interactivity"),t={"@wordpress/interactivity":t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n);var e=o("@wordpress/interactivity"),t={"@wordpress/interactivity":t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n);var e=o("@wordpress/interactivity"),t={"@wordpress/interactivity":t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n);var e=o("@wordpress/interactivity"),t={"@wordpress/interactivity":t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n);var e=o("@wordpress/interactivity"),t={"@wordpress/interactivity":t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n);var e=o("@wordpress/interactivity"),t={"@wordpress/interactivity":t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n);var e=o("@wordpress/interactivity"),t={"@wordpress/interactivity":t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n);var e=o("@wordpress/interactivity");const t=e=>{const t=document.querySelector(".site-main h1")?.innerText||document.title;let o=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});const{tableType:n,thinkTank:a,donor:i,donationYear:s,donorType:l,search:d,searchLabel:c,ajaxUrl:p,action:y,nonce:u,pageLength:b}=r;return new DataTable(e,{retrieve:!0,api:!0,autoWidth:!1,processing:!0,layout:{topEnd:{search:{placeholder:"Enter keyword...",text:r.searchLabel||"Search",processing:!0,menu:[25,50,75,100]}},topStart:{buttons:[{extend:"csvHtml5",title:t,text:"Download Data",exportOptions:{columns:":visible:not(.noExport)"}}],info:{callback:function(e,t,r,o,n,a){return`${o} Records Found`}}},bottomStart:!1,bottomEnd:{paging:{type:"simple_numbers"}}},render:{currency:function(e,t,r){return o.format(e)},number:function(e,t,r){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"'")}},drawCallback:function(e){},initComplete:function(e,t){},headerCallback:function(e,t,r,o,n){},footerCallback:function(e,t,r,o,n){}})},{state:r,actions:a,callbacks:i}=(0,e.store)("ttft/data-tables",{state:{isLoading:!1,donationYear:"all",donorType:"all",entityType:"think_tank"},actions:{async renderTable(){const o=(0,e.getContext)();try{const{tableType:e,thinkTank:n,donor:a,donationYear:i,donorType:s,search:l,searchLabel:d,ajaxUrl:c,action:p,nonce:y}=r,u=new FormData;u.append("action",p),u.append("nonce",y),u.append("table_type",e),u.append("search_label",d||"Search"),u.append("donation_year",i||"all"),u.append("donor_type",s||"all"),u.append("think_tank",n),u.append("donor",a),u.append("search",l||""),console.log("formData: ",u),r.isLoading=!0,o.isLoaded=!1;const b=await fetch(c,{method:"POST",body:u}),v=await b.text();if(console.log("responseText: ",v),!b.ok)throw new Error(`HTTP error! status: ${b.status}`);const f=JSON.parse(v);if(f.success){r.tableData=f.data;const e=document.getElementById(r.elementId);e&&(e.innerHTML=f.data,r.table&&(r.table.clear(),r.table=t(`#${r.tableId}`)))}else console.error("Error fetching table data:",f.data)}catch(e){console.error("catch( event ) renderTable:",e)}finally{r.isLoading=!1,o.isLoaded=!0}},initTable:()=>{r.table=t(`#${r.tableId}`)},destroyTable:()=>{r.table.clear().draw(),r.table.destroy()},destroyTableAsync:()=>new Promise((e=>{a.destroyTable(),e()})),setContext:()=>{const t=(0,e.getContext)();t.searchLabel&&(t.searchLabel=r.searchLabel)},generateSkeletonTable:e=>{let t="";for(let r=0;r<10;r++){t+='<tr class="row skeleton-row" width="100%">';for(let r=0;r<e;r++)t+='<td class="cell skeleton-cell"><div class="loader"></div></td>';t+="</tr>"}return t}},callbacks:{renderTable:()=>{const t=(()=>{const[t,o]=(0,e.useState)(r.donorType),[n,a]=(0,e.useState)(r.donationYear),i=()=>t!==r.donorType||n!==r.donationYear;return(0,e.useEffect)((()=>{i()&&(o(r.donorType),a(r.donationYear))}),[r.donorType,r.donationYear]),i()})();(0,e.useEffect)((()=>{t&&a.renderTable()}))},loadAnimation:()=>{(0,e.useEffect)((()=>{const e=document.getElementById(r.elementId);if(r.isLoading&&e){const t=e.querySelectorAll("thead th").length,r=a.generateSkeletonTable(t),o=e.querySelector("tbody");o&&(o.innerHTML=r)}}),[r.isLoading])},initLog:()=>{},logTable:()=>{const{tableType:e,thinkTank:t,donor:o,donationYear:n,donorType:a,search:i,isLoading:s}=r;console.log("State: ",e,t,o,n,a,s)},logState:e=>{console.log("key: ",r.key)},logLoading:()=>{const t=(0,e.getContext)();console.log("IS LOADING: ",r.isLoading,t.isLoaded)}}})})()})()})()})()})()})()})()})()})()})()})();